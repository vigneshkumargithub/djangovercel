from django.contrib.messages import constants
from django.contrib.messages.storage import default_storage

__all__ = (
<<<<<<< HEAD
    'add_message', 'get_messages',
    'get_level', 'set_level',
    'debug', 'info', 'success', 'warning', 'error',
    'MessageFailure',
=======
    "add_message",
    "get_messages",
    "get_level",
    "set_level",
    "debug",
    "info",
    "success",
    "warning",
    "error",
    "MessageFailure",
>>>>>>> 32e7214c1350fb4a88064960159c92207483e581
)


class MessageFailure(Exception):
    pass


<<<<<<< HEAD
def add_message(request, level, message, extra_tags='', fail_silently=False):
=======
def add_message(request, level, message, extra_tags="", fail_silently=False):
>>>>>>> 32e7214c1350fb4a88064960159c92207483e581
    """
    Attempt to add a message to the request using the 'messages' app.
    """
    try:
        messages = request._messages
    except AttributeError:
<<<<<<< HEAD
        if not hasattr(request, 'META'):
=======
        if not hasattr(request, "META"):
>>>>>>> 32e7214c1350fb4a88064960159c92207483e581
            raise TypeError(
                "add_message() argument must be an HttpRequest object, not "
                "'%s'." % request.__class__.__name__
            )
        if not fail_silently:
            raise MessageFailure(
<<<<<<< HEAD
                'You cannot add messages without installing '
                'django.contrib.messages.middleware.MessageMiddleware'
=======
                "You cannot add messages without installing "
                "django.contrib.messages.middleware.MessageMiddleware"
>>>>>>> 32e7214c1350fb4a88064960159c92207483e581
            )
    else:
        return messages.add(level, message, extra_tags)


def get_messages(request):
    """
    Return the message storage on the request if it exists, otherwise return
    an empty list.
    """
<<<<<<< HEAD
    return getattr(request, '_messages', [])
=======
    return getattr(request, "_messages", [])
>>>>>>> 32e7214c1350fb4a88064960159c92207483e581


def get_level(request):
    """
    Return the minimum level of messages to be recorded.

    The default level is the ``MESSAGE_LEVEL`` setting. If this is not found,
    use the ``INFO`` level.
    """
<<<<<<< HEAD
    storage = getattr(request, '_messages', default_storage(request))
=======
    storage = getattr(request, "_messages", default_storage(request))
>>>>>>> 32e7214c1350fb4a88064960159c92207483e581
    return storage.level


def set_level(request, level):
    """
    Set the minimum level of messages to be recorded, and return ``True`` if
    the level was recorded successfully.

    If set to ``None``, use the default level (see the get_level() function).
    """
<<<<<<< HEAD
    if not hasattr(request, '_messages'):
=======
    if not hasattr(request, "_messages"):
>>>>>>> 32e7214c1350fb4a88064960159c92207483e581
        return False
    request._messages.level = level
    return True


<<<<<<< HEAD
def debug(request, message, extra_tags='', fail_silently=False):
    """Add a message with the ``DEBUG`` level."""
    add_message(request, constants.DEBUG, message, extra_tags=extra_tags,
                fail_silently=fail_silently)


def info(request, message, extra_tags='', fail_silently=False):
    """Add a message with the ``INFO`` level."""
    add_message(request, constants.INFO, message, extra_tags=extra_tags,
                fail_silently=fail_silently)


def success(request, message, extra_tags='', fail_silently=False):
    """Add a message with the ``SUCCESS`` level."""
    add_message(request, constants.SUCCESS, message, extra_tags=extra_tags,
                fail_silently=fail_silently)


def warning(request, message, extra_tags='', fail_silently=False):
    """Add a message with the ``WARNING`` level."""
    add_message(request, constants.WARNING, message, extra_tags=extra_tags,
                fail_silently=fail_silently)


def error(request, message, extra_tags='', fail_silently=False):
    """Add a message with the ``ERROR`` level."""
    add_message(request, constants.ERROR, message, extra_tags=extra_tags,
                fail_silently=fail_silently)
=======
def debug(request, message, extra_tags="", fail_silently=False):
    """Add a message with the ``DEBUG`` level."""
    add_message(
        request,
        constants.DEBUG,
        message,
        extra_tags=extra_tags,
        fail_silently=fail_silently,
    )


def info(request, message, extra_tags="", fail_silently=False):
    """Add a message with the ``INFO`` level."""
    add_message(
        request,
        constants.INFO,
        message,
        extra_tags=extra_tags,
        fail_silently=fail_silently,
    )


def success(request, message, extra_tags="", fail_silently=False):
    """Add a message with the ``SUCCESS`` level."""
    add_message(
        request,
        constants.SUCCESS,
        message,
        extra_tags=extra_tags,
        fail_silently=fail_silently,
    )


def warning(request, message, extra_tags="", fail_silently=False):
    """Add a message with the ``WARNING`` level."""
    add_message(
        request,
        constants.WARNING,
        message,
        extra_tags=extra_tags,
        fail_silently=fail_silently,
    )


def error(request, message, extra_tags="", fail_silently=False):
    """Add a message with the ``ERROR`` level."""
    add_message(
        request,
        constants.ERROR,
        message,
        extra_tags=extra_tags,
        fail_silently=fail_silently,
    )
>>>>>>> 32e7214c1350fb4a88064960159c92207483e581
